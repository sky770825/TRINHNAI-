# 為什麼 /auth、/admin、/crm 會 404？

## 簡單解釋

**這些路由不是實際的檔案**，它們是 React Router 在瀏覽器中處理的「虛擬路由」。

## 問題原因

### 1. 專案結構

您的專案只有一個 HTML 檔案（`index.html`），其他頁面都是 React 元件：

```
實際存在的檔案（部署到 Vercel）：
dist/
├── index.html          ← 唯一的 HTML
├── assets/
│   ├── index-xxx.js    ← React 程式碼
│   └── index-xxx.css   ← 樣式

這些「路由」不是實際檔案：
├── /auth               ← 不存在！
├── /admin              ← 不存在！
└── /crm                ← 不存在！
```

### 2. 當訪問 /admin 時發生什麼？

#### ❌ 沒有 rewrites 配置（目前的情況）：

```
1. 瀏覽器請求 → https://trinhnai-342f2e80.vercel.app/admin
2. Vercel 收到請求
3. Vercel 找檔案 → /admin 或 /admin/index.html
4. 找不到這個檔案！
5. 返回 404 錯誤
```

#### ✅ 有 rewrites 配置（應該的情況）：

```
1. 瀏覽器請求 → https://trinhnai-342f2e80.vercel.app/admin
2. Vercel 收到請求
3. rewrites 規則生效 → 將 /admin 重寫到 /index.html
4. 返回 index.html（包含 React 程式碼）
5. React Router 讀取 URL 是 /admin
6. React Router 顯示 Admin 元件
```

### 3. 為什麼首頁正常？

因為首頁 `/` 直接對應到 `index.html`，Vercel 可以找到這個檔案。

```
訪問 / → Vercel 返回 index.html → ✅ 正常
訪問 /admin → Vercel 找不到 admin 檔案 → ❌ 404
```

## 為什麼配置沒有生效？

### 問題：本地變更尚未部署

```
✅ 本地 vercel.json 已更新：
{
  "rewrites": [
    {
      "source": "/:path*",
      "destination": "/index.html"
    }
  ]
}

❌ 但這個配置還沒有上傳到 Vercel！
❌ Vercel 目前使用的是舊配置（或沒有配置）
```

### 為什麼需要重新部署？

1. **Vercel 每次部署時會讀取專案檔案**
   - 包括 `vercel.json`

2. **舊部署使用的是舊配置**
   - 部署時的配置會被「凍結」
   - 本地修改不會自動同步

3. **必須重新部署才能應用新配置**
   - 重新部署 = 讓 Vercel 讀取新的 `vercel.json`

## 解決方案

### 在 Vercel Dashboard 重新部署

1. **前往**：https://vercel.com/linebot/trinhnai-342f2e80/deployments
2. **重新部署**：點擊最新部署的 **⋯** → **Redeploy**
3. **等待**：部署完成（約 1-2 分鐘）
4. **測試**：訪問 `/auth`、`/admin`、`/crm`

## 圖解

```
目前的情況（404 錯誤）：

瀏覽器 ─────→ Vercel ─────→ 找不到 /admin 檔案
   │                              │
   │         沒有 rewrites         │
   │                              ↓
   ←─────────────────────────── 404 錯誤


正確的情況（部署後）：

瀏覽器 ─────→ Vercel ─────→ rewrites 規則
   │                              │
   │                              ↓
   │                    將 /admin → /index.html
   │                              │
   │                              ↓
   ←────────────────────── 返回 index.html
   │
   ↓
React Router 處理
   │
   ↓
顯示 Admin 頁面 ✅
```

## 總結

| 問題 | 原因 | 解決方案 |
|------|------|----------|
| `/auth` 404 | 沒有實際檔案 | 重新部署讓 rewrites 生效 |
| `/admin` 404 | 沒有實際檔案 | 重新部署讓 rewrites 生效 |
| `/crm` 404 | 沒有實際檔案 | 重新部署讓 rewrites 生效 |

**關鍵**：這些路由需要 `vercel.json` 的 rewrites 配置才能正常運作，而這個配置需要重新部署才能生效。
